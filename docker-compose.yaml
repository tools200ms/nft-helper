
networks:
  nfttest-net:
    external: false


services:
  peer1:
    build:
      context: .
    volumes:
      - ./src/init.d/nftlist:/etc/init.d/nftlist
      - ./src/cron/nftlist.daily.sh:/etc/periodic/daily/nftlist.daily.sh
      - ./src/nftlist.sh:/usr/local/bin/nftlist.sh

      - ./test/nft_settings.sh:/root/nft_settings.sh
      - ./test/test_tbl-test_out-testset.list:/etc/nftlists/available/test_tbl-test_out-testset.list

      - ./lists:/etc/netlists/
      - ./examples:/usr/share/nftlist/

    networks:
      - nfttest-net

    cap_add: ['SYS_ADMIN']
    privileged: true

  peer2:
    build:
      context: .
    volumes:
      - ./src/init.d/nftlist:/etc/init.d/nftlist
      - ./src/cron/nftlist.daily.sh:/etc/periodic/daily/nftlist.daily.sh
      - ./src/nftlist.sh:/usr/local/bin/nftlist.sh

      - ./test/nft_settings.sh:/root/nft_settings.sh
      - ./test/test_tbl-test_out-testset.list:/etc/nftlists/available/test_tbl-test_out-testset.list

      - ./lists:/etc/netlists/
      - ./examples:/usr/share/nftlist/

    networks:
      - nfttest-net

    cap_add: ['SYS_ADMIN']
    privileged: true

